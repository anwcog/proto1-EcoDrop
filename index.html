<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#27ae60">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="EcoDrop">
  <title>EcoDrop - Sustainable Waste Management</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="manifest" href="site.webmanifest">

  <!-- Your app script with ES6 modules -->
  <script type="module" src="app.js"></script>

</head>
<body>
  <!-- Login Screen -->
  <div id="loginScreen" class="screen active">
   <div class="logo">
  <img src="Leaf favicon.png" alt="EcoDrop Logo">
</div>

    <h1>EcoDrop</h1>
    <p class="subtitle">Sustainable Waste Management</p>

    <div id="authNotice" class="notification hidden"></div>

    <input type="email" id="email" placeholder="Email" autocomplete="email" />
    <input type="password" id="password" placeholder="Password" autocomplete="current-password" />

    <button id="loginBtn" class="primary" onclick="login()">
      <div class="spinner hidden"></div>
      <span class="btnText">Login</span>
    </button>

    <button id="regBtn" class="secondary" onclick="window.location.href='register.html'">
      Register
    </button>
  </div>

  <!-- App Screen -->
  <div id="appScreen" class="screen">
    <h1>Welcome to EcoDrop</h1>
    <p class="subtitle">Your sustainable waste management dashboard</p>
    <!-- Main user card (single instance) -->
    <div class="card" id="mainUserCard">
      <p><strong>User:</strong> <span id="userNameCard"></span></p>
      <p><strong>Points:</strong> <span id="points">0</span></p>
    </div>

    <!-- Pages -->
  <div id="mapPage" class="page active">

    <div class="card">
        <h2>Map</h2>
        <p>Find recycling centers near you.</p>

    <!-- Map Container -->
      <div id="map-container">
  <div id="map"></div>
      </div>
    </div>
  </div>

    <div id="rewardsPage" class="page">

  <div class="card">
    <h2>Rewards</h2>
    <div id="yourPoints">
      â­ Your Points: <span id="pointsDisplay">0</span>
    </div>
    <div id="yourLeague" style="text-align:center; margin:10px 0; font-size:18px;">
      League: <span id="leagueDisplay">ğŸ¥‰ Bronze</span>
    </div>

    <!-- Image Upload -->
    <div class="upload-wrapper"> 
      <label for="rewardUpload" class="upload-area"> 
        <span class="plus">+</span> <input type="file" id="rewardUpload" accept="image/*" onchange="handleUpload(event)" hidden>
      </label>
    </div>

    <!-- League Guide -->
<div style="background:#f9f9f9; padding:15px; border-radius:8px; margin:15px 0; font-size:13px;">
  <strong style="display:block; margin-bottom:10px;">Points Per Image by League:</strong>
  
  <div style="display:flex; align-items:center; justify-content:space-between; margin:5px 0;">
    <div style="display:flex; align-items:center;">
      <span style="font-size:20px; margin-right:8px;">ğŸ¥‰</span> 
      <strong>Bronze (0-9):</strong> 
      <span style="margin-left:8px;">1 pt/image</span>
    </div>
    <span style="font-size:11px; color:#888; font-style:italic; text-align:right; margin-left:10px;">
      If League change does not appear immediately, please wait.
    </span>
  </div>

  <div style="display:flex; align-items:center; margin:5px 0;"><span style="font-size:20px; margin-right:8px;">ğŸ¥ˆ</span> <strong>Silver (10-24):</strong> <span style="margin-left:8px;">2 pts/image</span></div>
  <div style="display:flex; align-items:center; margin:5px 0;"><span style="font-size:20px; margin-right:8px;">ğŸ¥‡</span> <strong>Gold (25-49):</strong> <span style="margin-left:8px;">3 pts/image</span></div>
  <div style="display:flex; align-items:center; margin:5px 0;"><span style="font-size:20px; margin-right:8px;">ğŸ’</span> <strong>Platinum (50-499):</strong> <span style="margin-left:8px;">5 pts/image</span></div>
  
  <div style="display:flex; align-items:center; margin:5px 0; background:linear-gradient(90deg, #FFD700, #FFA500); padding:8px; border-radius:6px; font-weight:bold; color:white;">
    <span style="font-size:20px; margin-right:8px;">ğŸŒŸ</span> <strong>Super (500-999):</strong> <span style="margin-left:8px;">8 pts/image</span>
  </div>
  
  <div style="display:flex; align-items:center; margin:5px 0; background:linear-gradient(90deg, #ff2700, #ff2500); padding:8px; border-radius:6px; font-weight:bold; color:white;">
    <span style="font-size:20px; margin-right:8px;">ğŸ…</span> <strong>SuperSonic (1,000+):</strong> <span style="margin-left:8px;">10 pts/image</span>
  </div>
</div>

    <div id="rewardNotice" class="notification hidden"></div>

    <!-- Leaderboard -->
    <div id="leaderboard">
      <h2>Leaderboard</h2>
      <ul id="leaderboardList"></ul>
    </div>
  </div>
</div>

    <div id="marketplacePage" class="page">

      <div class="card">
        <h2>Marketplace</h2>
        <p>Browse eco-friendly products and services.</p>
      </div>
    </div>

    <div id="jobsPage" class="page">
      <div class="card">
        <h2>Jobs</h2>
        <p>Find green jobs and opportunities.</p>
      </div>
    </div>

    <!-- Account Page -->
    <div id="profilePage" class="page">
      <div class="card">
        <div style="text-align:center; margin-bottom:20px;">
          <div class="profile-avatar" id="profileAvatar">?</div>
          <h2 id="userName">Name</h2>
          <p style="color:#888;">Email</p>
          <p><span id="profilePoints">0</span> Points â­</p>
          <p id="profileLeague" style="font-size:20px; margin-top:5px;">League: ğŸ¥‰ Bronze</p>
        </div>

        <h3>Account Information</h3>
        <p><strong>Name:</strong> <span id="infoName"></span></p>
        <p><strong>Email:</strong> <span id="infoEmail"></span></p>
        <p><strong>Mobile:</strong> <span id="infoMobile"></span></p>

        <!-- Edit Toggle -->
        <button id="editToggleBtn" class="secondary" onclick="toggleEdit()">Edit Account</button>

        <!-- Hidden Edit Form -->
        <div id="editForm" class="hidden" style="margin-top:15px;">
          <div style="text-align:center;margin-bottom:15px;">
            <label for="profilePicUpload" class="profile-avatar small" id="editAvatar" style="cursor:pointer;">+</label>
            <p style="font-size:12px;color:#888;">Click to change profile picture</p>
          </div>
          <input type="file" id="profilePicUpload" accept="image/*" onchange="previewProfilePic(event)" hidden>

          <input type="text" id="editName" placeholder="Edit Name" autocomplete="name" />
          <input type="text" id="editMobile" placeholder="Edit Mobile Number" autocomplete="tel" />

          <button class="primary" onclick="saveChanges()">Save Changes</button>
        </div>

        <!-- Single Logout Button -->
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>

    <!-- Bottom Navigation -->
    <div class="bottomNav">
      <button onclick="navigate('map')">ğŸ—ºï¸<br>Map</button>
      <button onclick="navigate('rewards')">ğŸ<br>Rewards</button>
      <button onclick="navigate('marketplace')">ğŸ¬<br>Marketplace</button>
      <button onclick="navigate('jobs')">ğŸ’¼<br>Jobs</button>
      <button onclick="navigate('profile')">ğŸ‘¤<br>Profile</button>
    </div>
  </div>

  <!-- Loading Overlay -->
    <div id="loader" class="hidden">
  <div class="spinner"></div>
    </div>

 <!-- <script async defer src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&callback=initMap"></script> 
  and define initMap() to initialize the map inside #map -->

</body>
</html>
